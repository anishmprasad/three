<!DOCTYPE html>
<html>
  <title>The Digestive System - Coobo</title>
  <meta name="theme-color" content="#444" />
  <meta charset="utf-8" />
  <meta
    name="viewport"
    content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"
  />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <link rel="icon" href="/logo/logo.ico" />

  <div
    id="app"
    class="viewer-view"
    style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"
  >
    <div
      id="viewer"
      class="loading"
      style="position: relative; font-size: 0; width: 100%; height: 100%;"
    >
      <div id="slide-layers-letterbox"></div>
      <div
        id="splash"
        class="flex-center flex-column"
        style="background: radial-gradient(circle at 50% 30%, #fdfefe, #79d4ff, #50b7e8,#50b7e8);
              width: 100%;
              height: 100%;
              position: absolute;
              top: 0;
              left: 0;
              z-index: 1000;
              display: flex;
              box-shadow: inset 0 15px 15px -10px rgba(0, 85, 164, 0.9);"
      >
        <style>
          .flex-center {
            display: flex;
            align-items: center;
            justify-content: center;
          }
          .flex-column {
            display: flex;
            flex-direction: column;
          }
          #splash-title {
            flex-grow: 1;
          }
          #splash-bg {
            /* border-bottom: 8px solid #55b6e7;
                    background-size: cover;
                    box-shadow: 0 5px 15px 0 rgba(0, 0, 0, 0.5);
                    position: relative;
                    background-color: rgba(9, 71, 140, 0.8);
                    background-size: cover; */
          }
          #splash-bg::before {
            content: "";
            /* background: rgba(9, 71, 140, 0.75); */
            position: absolute;
            z-index: 0;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
          }
          #splash-tour-name {
            font-size: 8vmin;
            color: white;
            position: relative;
            z-index: 2;
            margin: 3vmin 0;
            text-shadow: 0 3px 10px black;
            line-height: 1;
            text-align: center;
          }
          #start-tour-btn {
            font-size: 2.5vmin;
            min-width: 8em;
            color: white;
            padding: 0.5em 1em;
            text-transform: uppercase;
            background: #509df3;
            border-radius: 5px;
            box-shadow: 0 5px 10px 2px rgba(0, 0, 0, 0.35);
            text-align: center;
            cursor: pointer;
            transition: 0.2s;
            animation: fadeIn 0.3s linear 0.5s;
            animation-fill-mode: both;
            margin: 3vmin 0;
          }

          #start-tour-btn:active {
            transform: scale(0.97);
          }

          #start-tour-btn .mobile-text {
            display: none;
          }
          @media (max-width: 500px) {
            #start-tour-btn .mobile-text {
              display: inline;
            }
            #start-tour-btn .desktop-text {
              display: none;
            }
            #splash-tour-name {
              font-size: 12vmin;
            }
            #start-tour-btn {
              font-size: 5vmin;
            }
          }
          #start-tour-btn:hover {
            background: #4faaff;
            box-shadow: 0 3px 6px 1px rgba(0, 0, 0, 0.35);
          }
          .cfil1 {
            fill: #1f68b1;
          }
          .cfil0 {
            fill: #1f68b1;
          }
          .fil0 {
            fill: #918f8f;
          }
          .fil1 {
            fill: #9f9e9e;
          }
          .fil2 {
            fill: #e7577f;
          }
          .fil3 {
            fill: #f5b428;
          }
          .fil4 {
            fill: #52b6e7;
          }
        </style>

        <!--<div id="splash-caption" class="splash-info caption"></div>-->
        <div style="flex-grow: 1" class="flex-center">
          <div class="flex-center flex-column" style="height: 100%;">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              xml:space="preserve"
              width="200px"
              height="70px"
              version="1.1"
              style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd"
              viewBox="0 0 2000000 700000"
              xmlns:xlink="http://www.w3.org/1999/xlink"
            >
              <g id="Layer_x0020_1">
                <metadata id="CorelCorpID_0Corel-Layer" />
                <g id="_1586819709504">
                  <path
                    class="cfil0"
                    d="M525788 164934c106317,0 191285,84969 191285,191285 0,106362 -84926,191283 -191285,191283 -106407,0 -191282,-84878 -191282,-191283 0,-106361 84920,-191285 191282,-191285zm-197963 330991c-36400,34410 -79997,51577 -130635,51577 -106405,0 -191280,-84878 -191280,-191283 0,-106361 84918,-191285 191280,-191285 50638,0 94238,17252 130635,51591 -18899,23842 -32154,50043 -39771,78565 -3900,-5661 -8418,-11055 -13549,-16186 -21356,-21265 -47095,-31989 -77315,-31989 -60900,0 -109302,48408 -109302,109304 0,60914 48388,109302 109302,109302 30220,0 55959,-10630 77315,-31987 5128,-5125 9641,-10519 13541,-16171 7620,28536 20869,54720 39779,78562zm197963 -249010c-60902,0 -109301,48408 -109301,109304 0,60914 48385,109302 109301,109302 60897,0 109304,-48402 109304,-109302 0,-60843 -48464,-109304 -109304,-109304zm418690 -81981c106316,0 191285,84969 191285,191285 0,106362 -84924,191283 -191285,191283 -106405,0 -191283,-84878 -191283,-191283 0,-106361 84921,-191285 191283,-191285zm0 81981c-60903,0 -109302,48408 -109302,109304 0,60914 48385,109302 109302,109302 60897,0 109304,-48402 109304,-109302 0,-60843 -48461,-109304 -109304,-109304zm432071 0c-60899,0 -109301,48408 -109301,109304 0,60914 48388,109302 109301,109302 60897,0 109308,-48402 109308,-109302 0,-60843 -48465,-109304 -109308,-109304zm-191279 -245812l81978 81947 0 115832c31709,-22569 68083,-33948 109301,-33948 106320,0 191286,84969 191286,191285 0,106362 -84924,191283 -191286,191283 -106404,0 -191279,-84878 -191279,-191283l0 -355116zm617535 163831c106316,0 191285,84969 191285,191285 0,106362 -84924,191283 -191285,191283 -106405,0 -191283,-84878 -191283,-191283 0,-106361 84921,-191285 191283,-191285zm0 81981c-60900,0 -109302,48408 -109302,109304 0,60914 48385,109302 109302,109302 60896,0 109304,-48402 109304,-109302 0,-60843 -48461,-109304 -109304,-109304z"
                  />
                  <circle class="cfil1" cx="540953" cy="392771" r="32290" />
                  <circle class="cfil1" cx="928458" cy="392771" r="32290" />
                  <path
                    class="cfil1"
                    d="M1103071 531265c-35187,95661 -187521,167633 -370112,167633 -182594,0 -334929,-71972 -370112,-167633 70756,65954 209948,110809 370112,110809 160163,0 299353,-44855 370112,-110809z"
                  />
                </g>
              </g>
            </svg>
            <span style="margin-top: 30px"></span>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              xml:space="preserve"
              width="280px"
              height="55px"
              version="1.1"
              style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd"
              viewBox="0 0 2800000 549996"
              xmlns:xlink="http://www.w3.org/1999/xlink"
            >
              <g id="Layer_x0020_1">
                <metadata id="CorelCorpID_0Corel-Layer" />
                <g id="_1586819706496">
                  <g>
                    <path
                      class="fil0"
                      d="M975704 464973l-235840 0c-7149,0 -12946,-5796 -12946,-12943l0 -354218c0,-7146 5797,-12943 12946,-12943l233941 0c7149,0 12945,5797 12945,12943l0 5330c0,7151 -5796,12948 -12945,12948l-200816 0c-7149,0 -12945,5794 -12945,12946l0 116105c0,7151 5796,12948 12945,12948l194299 0c7149,0 12946,5794 12946,12946l0 5060c0,7149 -5797,12946 -12946,12946l-194299 0c-7149,0 -12945,5797 -12945,12946l0 118820c0,7152 5796,12948 12945,12948l202715 0c7149,0 12946,5794 12946,12946l0 5329c0,7147 -5797,12943 -12946,12943z"
                    />
                    <path
                      class="fil0"
                      d="M1455857 464973l-7231 0c-7152,0 -12949,-5796 -12949,-12943l0 -312596c0,-4119 -5567,-5406 -7373,-1701l-134065 274904c-2168,4451 -6687,7274 -11636,7274l-18865 0c-4940,0 -9448,-2812 -11625,-7248l-134059 -273397c-1811,-3696 -7370,-2406 -7370,1710l0 311054c0,7147 -5797,12943 -12946,12943l-7234 0c-7149,0 -12946,-5796 -12946,-12943l0 -354218c0,-7146 5797,-12943 12946,-12943l28956 0c4930,0 9434,2804 11614,7229l130618 265363c4745,9640 18496,9638 23233,-9l130365 -265346c2177,-4430 6681,-7237 11619,-7237l28948 0c7152,0 12946,5797 12946,12943l0 354218c0,7147 -5794,12943 -12946,12943z"
                    />
                    <path
                      class="fil0"
                      d="M1740305 84869c79011,0 134397,27964 134397,98558 0,38951 -18791,65778 -48563,79637 -5094,2373 -5037,9641 153,11795 34030,14125 56287,42571 56287,86400 0,72496 -53489,103714 -136029,103714l-140182 0c-7152,0 -12946,-5796 -12946,-12943l0 -354218c0,-7146 5794,-12943 12946,-12943l133937 0zm-113760 44167l0 0 0 113930c0,7149 5797,12946 12949,12946l100001 0c58102,0 100726,-16013 100726,-70050 0,-53484 -42897,-69772 -100998,-69772l-99729 0c-7152,0 -12949,5794 -12949,12946zm0 170777l0 0 0 120994c0,7152 5797,12948 12949,12948l105701 0c61906,0 102632,-18464 102632,-73584 0,-55109 -40726,-73307 -102632,-73307l-105701 0c-7152,0 -12949,5797 -12949,12949z"
                    />
                    <path
                      class="fil0"
                      d="M2004297 464973l-7232 0c-7149,0 -12948,-5796 -12948,-12943l0 -354218c0,-7146 5799,-12943 12948,-12943l7232 0c7149,0 12948,5797 12948,12943l0 354218c0,7147 -5799,12943 -12948,12943z"
                    />
                    <path
                      class="fil0"
                      d="M2288748 84869c79010,0 134397,27964 134397,98558 0,38951 -18791,65778 -48564,79637 -5094,2373 -5037,9641 153,11795 34030,14125 56288,42571 56288,86400 0,72496 -53490,103714 -136029,103714l-140182 0c-7152,0 -12946,-5796 -12946,-12943l0 -354218c0,-7146 5794,-12943 12946,-12943l133937 0zm-113760 44167l0 0 0 113930c0,7149 5797,12946 12949,12946l100000 0c58102,0 100727,-16013 100727,-70050 0,-53484 -42897,-69772 -100999,-69772l-99728 0c-7152,0 -12949,5794 -12949,12946zm0 170777l0 0 0 120994c0,7152 5797,12948 12949,12948l105701 0c61906,0 102628,-18464 102628,-73584 0,-55109 -40722,-73307 -102628,-73307l-105701 0c-7152,0 -12949,5797 -12949,12949z"
                    />
                    <path
                      class="fil0"
                      d="M2781348 464973l-235840 0c-7152,0 -12949,-5796 -12949,-12943l0 -354218c0,-7146 5797,-12943 12949,-12943l233938 0c7149,0 12946,5797 12946,12943l0 5330c0,7151 -5797,12948 -12946,12948l-200815 0c-7149,0 -12946,5794 -12946,12946l0 116105c0,7151 5797,12948 12946,12948l194301 0c7149,0 12943,5794 12943,12946l0 5060c0,7149 -5794,12946 -12943,12946l-194301 0c-7149,0 -12946,5797 -12946,12946l0 118820c0,7152 5797,12948 12946,12948l202717 0c7149,0 12946,5794 12946,12946l0 5329c0,7147 -5797,12943 -12946,12943z"
                    />
                  </g>
                  <path
                    class="fil1"
                    d="M278414 547459c-114838,0 -213294,-71377 -253395,-172089l31 -6c694,1749 1406,3496 2137,5236 6622,15758 21898,25231 37979,25231 5318,0 10732,-1037 15945,-3231 20494,-8620 30364,-31890 22552,-52515 29220,67592 96551,115013 174751,115013 22745,0 41179,18440 41179,41182 0,22742 -18434,41179 -41179,41179z"
                  />
                  <path
                    class="fil2"
                    d="M65166 405831c-16081,0 -31357,-9473 -37979,-25231 -42803,-101801 -20494,-218027 56758,-296728 -14558,16157 -14077,41062 1469,56633 8044,8056 18592,12084 29143,12084 10525,0 21056,-4008 29095,-12036l966 -949 -870 901c-54757,54953 -70710,136661 -40640,208174 8815,20965 -1035,45105 -21997,53921 -5213,2194 -10627,3231 -15945,3231z"
                  />
                  <path
                    class="fil3"
                    d="M114557 152589c-10551,0 -21099,-4028 -29143,-12084 -16070,-16095 -16047,-42165 51,-58235 39087,-39027 88359,-64984 142483,-75070 50043,-9320 101152,-4601 148360,13621 -18796,-3722 -38253,6139 -45944,24505 -8781,20976 1103,45105 22085,53887 2143,898 4263,1837 6370,2812 -20078,-8439 -32820,-11960 -50916,-14854 -59281,-9502 -120323,9522 -164251,53382 -8039,8028 -18570,12036 -29095,12036z"
                  />
                  <g>
                    <path
                      class="fil4"
                      d="M462116 316279l-249755 0c-22743,0 -41179,-18437 -41179,-41179 0,-22745 18436,-41179 41179,-41179 0,0 236999,0 243819,0 6821,0 7660,-4705 6968,-7339 -14953,-57056 -55999,-104465 -110702,-127369 -20976,-8782 -30863,-32911 -22079,-53887 8782,-20979 32916,-30864 53887,-22079 80405,33661 140287,104318 160186,189003 5919,25192 122,51313 -15914,71671 -16078,20416 -40198,32208 -66175,32358 -76,0 -156,0 -235,0z"
                    />
                  </g>
                </g>
              </g>
            </svg>
          </div>
        </div>
        <div
          class="flex-column"
          style="height: 25vw; max-height: 48vh; min-height: 300px; width: 100%"
        >
          <div
            id="logo-progress"
            style="width: 100%;
                     height: 12px;
                     padding: 2px 0;"
          >
            <div
              id="progressBar"
              style="height: 100%; background: #fff; width: 0; transition: width 0.5s linear 0s"
            ></div>
          </div>
          <div id="splash-title">
            <div
              id="splash-bg"
              class="flex-center flex-column"
              style="height: 100%;"
            >
              <div id="splash-tour-name"></div>
              <div id="start-tour-btn" style="display: none">
                <span class="desktop-text">Play</span
                ><span class="mobile-text">Tap to start</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    window.COOBO = Boolean("production" !== "development");
    window.loadingStart = new Date();
    let json_url = "/demo/" + "5c94572421425a09adcb3e4e";
    if (window.COOBO) {
      json_url = "/api" + json_url;
    }
    window.LTI_callback = "";
    window.LTI_sourceid = "";
    window.LTI_key = "";
    var perfDebug = false;
    var speed;

    var getParams = function(url) {
      var params = {};
      var parser = document.createElement("a");
      parser.href = url;
      var query = parser.search.substring(1);
      var vars = query.split("&");
      for (var i = 0; i < vars.length; i++) {
        var pair = vars[i].split("=");
        params[pair[0]] = decodeURIComponent(pair[1]);
      }
      return params;
    };

    function bindSplashScreen() {
      const div = document.getElementById("splash");
      div.progress = document.getElementById("progressBar");
      return div;
    }

    window.onload = function() {
      var container = document.getElementById("viewer");
      var splash = bindSplashScreen();
      var params = getParams(window.location.href);

      if (params["nouicontrols"] && params["nouicontrols"] === "true") {
        splash.style.background = "transparent";
      }
      if (params["navstyle"]) {
        document
          .getElementById("app")
          .classList.add("navstyle-" + params["navstyle"]);
      }
      const splashTitle = document.getElementById("splash-title");
      // const splash-caption = document.getElementById("splash-caption");

      var assetsToLoad = 0;
      var assetsLoaded = 0;

      var onAssetLoad = function() {
        assetsLoaded++;
        if (assetsToLoad === assetsLoaded) {
          onReady();
        }
        splash.progressStart = (assetsLoaded / assetsToLoad) * 0.25;
        splash.progress.style.width = (assetsLoaded / assetsToLoad) * 100 + "%";
      };

      var loadCSS = function(href) {
        var head = document.getElementsByTagName("head")[0];
        var link = document.createElement("link");
        link.rel = "stylesheet";
        link.type = "text/css";
        link.href = href;
        link.media = "all";
        head.appendChild(link);
        assetsToLoad++;
        link.onload = function() {
          onAssetLoad();
        };
      };
      var loadScript = function(href, onload) {
        var head = document.getElementsByTagName("head")[0];
        var script = document.createElement("script");
        script.src = href;
        head.appendChild(script);
        assetsToLoad++;
        script.onload = function() {
          if (!!onload) {
            onload();
          }
          onAssetLoad();
        };
      };

      loadCSS("/Q3/q3.css?v=4");
      loadCSS("/lib/mathquill/mathquill.css?v=2");
      loadCSS("https://fonts.googleapis.com/icon?family=Material+Icons");
      // loadCSS("https://fonts.googleapis.com/css?family=Acme|Anton|Archivo+Black|Arsenal|Arvo|Bangers|Boogaloo|Bree+Serif|Cinzel|Comfortaa|Courgette|Dancing+Script|Dosis|Engagement|Gloria+Hallelujah |Indie+Flower|Julius+Sans+One|Kalam|Karla|Kaushan+Script|Lobster|Luckiest+Guy|Marck Script|Montserrat|Old+Standard+TT|Oswald|Pacifico|Permanent+Marker|Poiret+One|Quicksand|Rajdhani|Raleway|Ranga|Roboto|Rock+Salt|Rokkitt|Sacramento|Satisfy|Shrikhand|Sigmor+One|Special+Elite|Spectral+SC|Ubuntu");
      loadCSS(
        "https://fonts.googleapis.com/css?family=Fredoka+One|Barlow+Condensed:400,400i,700,700i|Boogaloo|Jockey+One|Lobster|Montserrat:400,400i,700,700i|Noticia+Text:400,400i,700,700i|Orbitron:700|Oswald:400,700|Raleway:400,400i,700,700i|Ranga:400,700|Roboto+Slab:400,700|Roboto:400,400i,700,700i|Squada+One|Titillium+Web:400,400i,700,700i|Ubuntu:400,400i,700,700i|Vollkorn:400,400i,700,700i"
      );
      //loadCSS("//cdn.quilljs.com/1.0.0/quill.core.css");
      loadCSS("/css/animate.min.css");
      // loadCSS("/Q3/rewardScreens.css");
      loadCSS("/Q3/rateScreen.css?v=4");
      loadScript("https://apis.google.com/js/api.js");
      loadScript("/js/viewer.libs.js?v=2", function() {
        loadScript("/Q3/q3.js?v=5");
      });

      var fillSplash = function(data) {
        let title = document.getElementById("splash-tour-name");
        title.innerText = data.title;
        //let bg = document.getElementById("splash-bg");
        //bg.style.backgroundImage = 'url("/assets/' + (data.thumb ? data.thumb : (data._id + ".png")) + '")'
      };

      var onReady = function() {
        if (!Detector.webgl) {
          $("#app").css("display", "none");
          Detector.addGetWebGLMessage();
        } else {
          let params = {};
          if (window.location.search) {
            params = getParams(window.location.href);
          }
          let previewData = JSON.parse(localStorage.getItem("previewData"));
          if (
            params["preview"] &&
            params["preview"] === "true" &&
            previewData
          ) {
            if (!previewData.quizData) {
              previewData.quizData = {};
            }
            Q3.start("viewer", previewData);
            fillSplash(previewData);
          } else {
            $.ajax({
              url: json_url,
              type: "GET",
              dataType: "json",
              success(data) {
                if (!data.quizData) {
                  data.quizData = {};
                }
                Q3.start("viewer", data);
                fillSplash(data);
                //splashCaption.innerText = Q3.data.subtitle || "";
              },
              error(res, status, err) {
                console.error(res, status, err);
              }
            });
          }

          if (window.location.hash == "#debug") {
            perfDebug = true;
          }

          if (params["nouicontrols"] && params["nouicontrols"] === "true") {
            Q3.ouicontrols = true;
            //$('#slide-count-wrap').addClass('hidden');
          }
          if (params["sensitivity"]) {
            speed = params["sensitivity"];
            //$('#slide-count-wrap').addClass('hidden');
          }

          var timeOut = false;

          function receiveMessage(event) {
            var data = event.data;

            Q3.controls.autoRotate = false;
            clearTimeout(timeOut);
            timeOut = setTimeout(function() {
              Q3.controls.autoRotate = true;
            }, Q3.data.slides[Q3.slide].controls.autoRotateDelay * 1000);

            if (data) {
              //console.log(data);
              var x = Q3.camera.position.x;
              var y = Q3.camera.position.y;
              var z = Q3.camera.position.z;
              if (data.direction === 1) {
                Q3.camera.position.x =
                  x * Math.cos(speed) + z * Math.sin(speed);
                Q3.camera.position.z =
                  z * Math.cos(speed) - x * Math.sin(speed);
              } else {
                Q3.camera.position.x =
                  x * Math.cos(speed) - z * Math.sin(speed);
                Q3.camera.position.z =
                  z * Math.cos(speed) + x * Math.sin(speed);
              }

              Q3.camera.lookAt(Q3.controls.target);
              //console.log(Q3.camera.position);
              Q3.camera.updateProjectionMatrix();
            }
          }
          if (params["nouicontrols"] && params["nouicontrols"] === "true") {
            window.addEventListener("message", receiveMessage, false);
          }
        }
      };
    };
  </script>
</html>
