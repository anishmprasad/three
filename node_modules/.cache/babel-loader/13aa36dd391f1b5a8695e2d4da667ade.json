{"ast":null,"code":"import { Line } from './../2DObjects/Line.js';\nimport Text from './../2DObjects/Text.js';\nimport Button from './../2DObjects/Button.js';\nimport Picture from './../2DObjects/Picture.js';\nimport Iframe from './../2DObjects/Iframe.js';\nimport Slider from './../2DObjects/Slider.js';\nimport CircleSlider from './../2DObjects/CircleSlider.js';\nimport MathFormula from './../2DObjects/MathFormula.js';\nimport RenderManager from '../rendering/render-manager';\nconst NSString = 'http://www.w3.org/2000/svg';\n\nclass Layer {\n  constructor(options = {}) {\n    this.type = options.type || '2D';\n    this.subtype = options.subtype;\n    this.name = options.name || '';\n    this.isText = options.isText || false;\n    this.level = 0; // this.index = options.hasOwnProperty('index') ? options.index : 0;\n\n    this.uuid = options.uuid || THREE.Math.generateUUID();\n    this.visible = options.visible !== false;\n    this.isVisible = true;\n    this.generalVisibility = options.generalVisibility;\n    this.parent = options.parent;\n    this.styles = {\n      position: 'absolute',\n      left: '0',\n      top: '0',\n      width: '100%',\n      height: 'calc(100% - 55px)',\n      overflow: 'hidden',\n      pointerEvents: 'none',\n      zIndex: 4\n    }; // if ( this.type === '2D' && this.isText) {\n    //   this.domElement = document.createElement('div');\n    //   this.domElement.id = this.name;\n    //   Object.assign( this.domElement.style,  this.styles );\n    //   this.objects = this.initObjects( options.objects );\n    // } else\n\n    if (this.type === '2D') {\n      window.Q3.data.slides[window.Q3.slide].layers2D[this.uuid] = 1; // if (window.Q3.data.slides[window.Q3.slide].layers2D.indexOf(this.uuid) === -1) {\n      //     window.Q3.data.slides[window.Q3.slide].layers2D.push(this.uuid);\n      // }\n\n      if (this.subtype === 'sliders' || this.subtype === 'iframes' || this.isText) {\n        //jquery ui slider is not working inside svg->foreignObject (problem with calculation of thumb position)\n        //svg is not needed in this case div is enough\n        this.domElement = document.createElement('div'); // this.domElement.setAttribute('width', \"100%\");\n        // this.domElement.setAttribute('height', \"100%\");\n\n        this.domElement.id = this.uuid;\n      } else {\n        this.domElement = document.createElementNS(NSString, 'svg');\n        this.domElement.setAttribute('width', 400);\n        this.domElement.setAttribute('height', 300);\n        this.domElement.id = this.uuid; //required for lines arrows at least\n\n        this.defs = document.createElementNS(NSString, 'defs');\n        this.domElement.appendChild(this.defs);\n      }\n\n      Object.assign(this.domElement.style, this.styles);\n      this.objects = this.initObjects(options.objects);\n    } else if (this.type === '2DGroup') {\n      this.children = [];\n    } else if (this.type === 'Renderer') {\n      this.domElement = options.domElement;\n      Object.assign(this.domElement.style, {\n        position: 'absolute',\n        left: '0',\n        top: '0',\n        pointerEvents: 'none'\n      });\n    }\n\n    return this;\n  }\n\n  add(child) {\n    (this.type === '2D' ? this.objects : this.children).push(child);\n    child.parent = this.uuid;\n    return this;\n  }\n\n  clone() {\n    const uuid = THREE.Math.generateUUID(),\n          objectsWithNewUuids = {},\n          objectsWithCurrentUuids = JSON.parse(JSON.stringify(window.Q3.data.layers.layers2D[this.uuid].objects)); //deep cloning object\n\n    for (let currentUuid in objectsWithCurrentUuids) objectsWithNewUuids[THREE.Math.generateUUID()] = objectsWithCurrentUuids[currentUuid];\n\n    const l = new Layer({\n      uuid: uuid,\n      name: this.name + '(copy)',\n      type: this.type,\n      subtype: this.subtype,\n      isText: this.isText,\n      parent: this.parent,\n      children: this.children,\n      objects: objectsWithNewUuids,\n      visible: this.visible\n    });\n    window.Q3.data.layers.layers2D[l.uuid] = {\n      name: l.name,\n      type: l.type,\n      subtype: l.subtype,\n      isText: l.isText,\n      // parent: l.parent,\n      children: l.children,\n      objects: objectsWithNewUuids,\n      visible: l.visible\n    };\n    const brothers = this.parent ? window.Q3.layers.list[this.parent].children : window.Q3.layers.graph;\n    brothers.splice(this.index, 0, l);\n    return l;\n  }\n\n  remove(child) {\n    const a = this.type === '2D' ? this.objects : this.children;\n    a.splice(a.indexOf(child), 1); //update indices of next children\n    // for (let i = child.index; i < a.length; i++) a[i].index = i;\n\n    child.parent = null;\n    return this;\n  }\n\n  initObjects(objects = {}) {\n    return Object.keys(objects) // .sort((a, b) => { if (objects[a].index < objects[b].index) { return -1 } else if (objects[a].index > objects[b].index) { return 1 } return 0; })\n    .map(uuid => {\n      const data = objects[uuid];\n      let objMap = {\n        line: Line,\n        text: Text,\n        button: Button,\n        picture: Picture,\n        iframe: Iframe,\n        circleSlider: CircleSlider,\n        slider: Slider,\n        mathFormula: MathFormula\n      };\n\n      if (data.type === 'text') {\n        data.contentConverted = true;\n      }\n\n      return new objMap[data.type](data, this, uuid);\n    });\n  }\n\n  render(width, height) {\n    if (this.type === 'Renderer') return;\n    if (this.type === '2DGroup') return this.children.forEach(c => c.render(width, height));\n    this.objects.forEach(o => {\n      o.render(width, height);\n    });\n  }\n\n}\n\nexport default Layer;\nexport { Layer }; // WEBPACK FOOTER //\n// ./src/Q3/layers/Layer.js","map":{"version":3,"sources":["/Users/ghost/Documents/three/src/source/layers/Layer.js"],"names":["Line","Text","Button","Picture","Iframe","Slider","CircleSlider","MathFormula","RenderManager","NSString","Layer","constructor","options","type","subtype","name","isText","level","uuid","THREE","Math","generateUUID","visible","isVisible","generalVisibility","parent","styles","position","left","top","width","height","overflow","pointerEvents","zIndex","window","Q3","data","slides","slide","layers2D","domElement","document","createElement","id","createElementNS","setAttribute","defs","appendChild","Object","assign","style","objects","initObjects","children","add","child","push","clone","objectsWithNewUuids","objectsWithCurrentUuids","JSON","parse","stringify","layers","currentUuid","l","brothers","list","graph","splice","index","remove","a","indexOf","keys","map","objMap","line","text","button","picture","iframe","circleSlider","slider","mathFormula","contentConverted","render","forEach","c","o"],"mappings":"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","sourcesContent":["import { Line } from './../2DObjects/Line.js';\nimport Text from './../2DObjects/Text.js';\nimport Button from './../2DObjects/Button.js';\nimport Picture from './../2DObjects/Picture.js';\nimport Iframe from './../2DObjects/Iframe.js';\nimport Slider from './../2DObjects/Slider.js';\nimport CircleSlider from './../2DObjects/CircleSlider.js';\nimport MathFormula from './../2DObjects/MathFormula.js';\nimport RenderManager from '../rendering/render-manager';\n\nconst NSString = 'http://www.w3.org/2000/svg';\n\nclass Layer {\n\tconstructor(options = {}) {\n\t\tthis.type = options.type || '2D';\n\t\tthis.subtype = options.subtype;\n\n\t\tthis.name = options.name || '';\n\n\t\tthis.isText = options.isText || false;\n\n\t\tthis.level = 0;\n\n\t\t// this.index = options.hasOwnProperty('index') ? options.index : 0;\n\n\t\tthis.uuid = options.uuid || THREE.Math.generateUUID();\n\n\t\tthis.visible = options.visible !== false;\n\t\tthis.isVisible = true;\n\t\tthis.generalVisibility = options.generalVisibility;\n\n\t\tthis.parent = options.parent;\n\n\t\tthis.styles = {\n\t\t\tposition: 'absolute',\n\t\t\tleft: '0',\n\t\t\ttop: '0',\n\t\t\twidth: '100%',\n\t\t\theight: 'calc(100% - 55px)',\n\t\t\toverflow: 'hidden',\n\t\t\tpointerEvents: 'none',\n\t\t\tzIndex: 4\n\t\t};\n\n\t\t// if ( this.type === '2D' && this.isText) {\n\t\t//   this.domElement = document.createElement('div');\n\t\t//   this.domElement.id = this.name;\n\t\t//   Object.assign( this.domElement.style,  this.styles );\n\t\t//   this.objects = this.initObjects( options.objects );\n\t\t// } else\n\n\t\tif (this.type === '2D') {\n\t\t\twindow.Q3.data.slides[window.Q3.slide].layers2D[this.uuid] = 1;\n\t\t\t// if (window.Q3.data.slides[window.Q3.slide].layers2D.indexOf(this.uuid) === -1) {\n\t\t\t//     window.Q3.data.slides[window.Q3.slide].layers2D.push(this.uuid);\n\t\t\t// }\n\n\t\t\tif (this.subtype === 'sliders' || this.subtype === 'iframes' || this.isText) {\n\t\t\t\t//jquery ui slider is not working inside svg->foreignObject (problem with calculation of thumb position)\n\t\t\t\t//svg is not needed in this case div is enough\n\t\t\t\tthis.domElement = document.createElement('div');\n\t\t\t\t// this.domElement.setAttribute('width', \"100%\");\n\t\t\t\t// this.domElement.setAttribute('height', \"100%\");\n\t\t\t\tthis.domElement.id = this.uuid;\n\t\t\t} else {\n\t\t\t\tthis.domElement = document.createElementNS(NSString, 'svg');\n\t\t\t\tthis.domElement.setAttribute('width', 400);\n\t\t\t\tthis.domElement.setAttribute('height', 300);\n\t\t\t\tthis.domElement.id = this.uuid;\n\n\t\t\t\t//required for lines arrows at least\n\t\t\t\tthis.defs = document.createElementNS(NSString, 'defs');\n\t\t\t\tthis.domElement.appendChild(this.defs);\n\t\t\t}\n\n\t\t\tObject.assign(this.domElement.style, this.styles);\n\n\t\t\tthis.objects = this.initObjects(options.objects);\n\t\t} else if (this.type === '2DGroup') {\n\t\t\tthis.children = [];\n\t\t} else if (this.type === 'Renderer') {\n\t\t\tthis.domElement = options.domElement;\n\n\t\t\tObject.assign(this.domElement.style, {\n\t\t\t\tposition: 'absolute',\n\t\t\t\tleft: '0',\n\t\t\t\ttop: '0',\n\t\t\t\tpointerEvents: 'none'\n\t\t\t});\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tadd(child) {\n\t\t(this.type === '2D' ? this.objects : this.children).push(child);\n\n\t\tchild.parent = this.uuid;\n\n\t\treturn this;\n\t}\n\n\tclone() {\n\t\tconst uuid = THREE.Math.generateUUID(),\n\t\t\tobjectsWithNewUuids = {},\n\t\t\tobjectsWithCurrentUuids = JSON.parse(JSON.stringify(window.Q3.data.layers.layers2D[this.uuid].objects)); //deep cloning object\n\n\t\tfor (let currentUuid in objectsWithCurrentUuids)\n\t\t\tobjectsWithNewUuids[THREE.Math.generateUUID()] = objectsWithCurrentUuids[currentUuid];\n\n\t\tconst l = new Layer({\n\t\t\tuuid: uuid,\n\t\t\tname: this.name + '(copy)',\n\t\t\ttype: this.type,\n\t\t\tsubtype: this.subtype,\n\t\t\tisText: this.isText,\n\t\t\tparent: this.parent,\n\t\t\tchildren: this.children,\n\t\t\tobjects: objectsWithNewUuids,\n\t\t\tvisible: this.visible\n\t\t});\n\n\t\twindow.Q3.data.layers.layers2D[l.uuid] = {\n\t\t\tname: l.name,\n\t\t\ttype: l.type,\n\t\t\tsubtype: l.subtype,\n\t\t\tisText: l.isText,\n\t\t\t// parent: l.parent,\n\t\t\tchildren: l.children,\n\t\t\tobjects: objectsWithNewUuids,\n\t\t\tvisible: l.visible\n\t\t};\n\n\t\tconst brothers = this.parent ? window.Q3.layers.list[this.parent].children : window.Q3.layers.graph;\n\n\t\tbrothers.splice(this.index, 0, l);\n\n\t\treturn l;\n\t}\n\n\tremove(child) {\n\t\tconst a = this.type === '2D' ? this.objects : this.children;\n\n\t\ta.splice(a.indexOf(child), 1);\n\n\t\t//update indices of next children\n\t\t// for (let i = child.index; i < a.length; i++) a[i].index = i;\n\n\t\tchild.parent = null;\n\n\t\treturn this;\n\t}\n\n\tinitObjects(objects = {}) {\n\t\treturn (\n\t\t\tObject.keys(objects)\n\t\t\t\t// .sort((a, b) => { if (objects[a].index < objects[b].index) { return -1 } else if (objects[a].index > objects[b].index) { return 1 } return 0; })\n\t\t\t\t.map(uuid => {\n\t\t\t\t\tconst data = objects[uuid];\n\n\t\t\t\t\tlet objMap = {\n\t\t\t\t\t\tline: Line,\n\t\t\t\t\t\ttext: Text,\n\t\t\t\t\t\tbutton: Button,\n\t\t\t\t\t\tpicture: Picture,\n\t\t\t\t\t\tiframe: Iframe,\n\t\t\t\t\t\tcircleSlider: CircleSlider,\n\t\t\t\t\t\tslider: Slider,\n\t\t\t\t\t\tmathFormula: MathFormula\n\t\t\t\t\t};\n\t\t\t\t\tif (data.type === 'text') {\n\t\t\t\t\t\tdata.contentConverted = true;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn new objMap[data.type](data, this, uuid);\n\t\t\t\t})\n\t\t);\n\t}\n\n\trender(width, height) {\n\t\tif (this.type === 'Renderer') return;\n\n\t\tif (this.type === '2DGroup') return this.children.forEach(c => c.render(width, height));\n\n\t\tthis.objects.forEach(o => {\n\t\t\to.render(width, height);\n\t\t});\n\t}\n}\n\nexport default Layer;\nexport { Layer };\n\n// WEBPACK FOOTER //\n// ./src/Q3/layers/Layer.js\n"]},"metadata":{},"sourceType":"module"}